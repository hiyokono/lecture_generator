# 📚 単語一覧生成AI
英文に出てくる難しい英単語の日本語訳一覧を生成するAIの仕様

<details>
<summary>📥 入力</summary>
なし
</details>

<details>
<summary>📤 出力</summary>

- `book`ディレクトリ
  - 大項目 ディレクトリ
   - 中項目.md

</details>

<details>
<summary>🛠️ 処理の流れ</summary>

1. 対象のファイルの取得
- bookフォルダの、'week'から始まるフォルダにあるすべてのmdファイルを取得します。
- 対象ファイルのそれぞれに対して、以下の処理を行います。

2. 英文の解析
- stanzaを使って英文のすべてをレマ化します。
- 記号、数字、固有名詞を除くレマについて、レマと品詞のタプルをキー、登場回数を値とする辞書「レマ一覧」を作ります。

3. 難しい単語の抽出
- data/CEFR-J.csv から、'CEFR'列が'A1'または'A2'または'B1'である'headword'の一覧を抽出し、これを「レマ一覧」から除きます。

4. 日本語訳の作成
- 生成AIを使って、「レマ一覧」に残った英単語の日本語訳を作成します。
  - 生成AIの呼び出しは、1ファイルごとに1回だけ行って、すべての単語の日本語訳を取得するようにします。
  - 入力として本文全体と「レマ一覧」に残った英単語のリストを渡します。
  - 単語の一般的な意味ではなく、本文に実際に出てきた意味を日本語で挙げるようにします。
  - 日本語訳を英語に訳したら、元の単語になることを確認します。
  - 日本語訳はできるだけ簡潔にします。
  - 本文で使われている品詞と日本語訳の品詞が一致するようにします。
  - 生成AIには[{"lemma": "", "translation": ""}] のようなJSON形式だけを出力させるようにします。JSON以外のものを返さないように念を押してください。
  - 返ってきたJSONをPython上で解析します。

5. 単語一覧の出力
- 入力のmdファイルの冒頭に'words_'をつけたファイル名で、入力と同じフォルダに単語一覧を出力します。
- 単語一覧のファイルは、英単語と日本語訳と登場回数のみで構成されるようにします。
  - 例　difficult (5回) - 難しい

</details>
